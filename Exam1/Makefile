
# Compiler
CC=g++

# Directory containing the source files
SRCDIR=src

# Directory containing the object files
OBJDIR=obj

# Output directory
OUTDIR=.

# Output file
OUTPUT=$(OUTDIR)/main

# List of source files
SRCS=$(shell find $(SRCDIR) -type f -name "*.cpp")

# List of correspondin object files
OBJS=$(patsubst $(SRCDIR)/%.cpp, $(OBJDIR)/%.o, $(SRCS))

# Dependencies lists generated by g++
DEPS=$(patsubst $(OBJDIR)/%.o, $(OBJDIR)/%.d, $(OBJS))

default: $(OUTPUT)

$(OUTPUT): $(OBJS)
	$(CC) -o $@ $^

-include $(DEPS)

$(OBJDIR)/%.o: $(SRCDIR)/%.cpp
	mkdir -p $(@D)
	$(CC) -MMD -o $@ -c $<

clean:
	rm -r $(OBJDIR) $(OUTPUT)